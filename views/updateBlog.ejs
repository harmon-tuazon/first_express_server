
<!--This is for nav bar-->

<%- include('./partials/nav.ejs') %>

<main class="row d-flex container m-0">
    <div class="container-fluid col-12">
        <img class="float-leaf-left journal" src="../assets/float leaf left.png">
        <img class="float-leaf-right journal" src="../assets/float leaf right.png">

        <form action="/blogs/<%= blog._id %>" method="put" id="form">
            <div class="text-center mt-3">
                <h1>Update Your Blog</h1>
                <img src="../assets/leaf.png">
            </div>
            <div class="d-flex flex-column align-items-center justify-content-evenly">
                <div class="mb-3 inputFieldcontainer col-5">
                    <input type="text" class="form-control inputField activeField shadow-none" id="title" name="title" placeholder="<%= blog.title %>">
                    <span class="placeHolder activeSpan">Title</span>
                </div>
                <div class="mb-3 inputFieldcontainer col-5">
                    <input type="text" class="form-control inputField activeField shadow-none" id="snippet" name="snippet" placeholder="<%= blog.snippet %>">
                    <span class="placeHolder activeSpan">Snippet</span>
                </div>
                <div class="mb-3 inputFieldcontainer col-5">
                    <textarea row="10" cols="50" wrap="hard" class="form-control inputField activeField shadow-none" id="content" name="content" placeholder="<%= blog.content%>"></textarea>
                    <span class="placeHolder activeSpan">Content</span>
                </div>
            </div>
            
            <div class="d-flex justify-content-center align-items-start gap-5">
                <a href="/blogs/<%= blog._id %>"><button type="button" class="btn btn-danger btn-lg">Cancel</button></a>    
                <button type="submit"  class="update btn btn-danger btn-lg" data-doc="<%= blog._id %>">Update</button>
            </div>
          </form>

<script>
const update = document.querySelector('.update')

function deleteRequest() {
    const endpoint = `/blogs/${trash.dataset.doc}/update-blog`

    fetch(endpoint, { method: 'PUT', })
      .then(response => response.json())
      .then(data => window.location.href = data.redirect)
      .catch(err => console.log(err));
    
}
update.addEventListener('click', deleteRequest);

</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

</body>
</html>